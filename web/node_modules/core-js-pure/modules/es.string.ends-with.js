'use strict';
var $ = require('../internals/export');
var getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;
var toLength = require('../internals/to-length');
<<<<<<< Updated upstream
=======
var toString = require('../internals/to-string');
>>>>>>> Stashed changes
var notARegExp = require('../internals/not-a-regexp');
var requireObjectCoercible = require('../internals/require-object-coercible');
var correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');
var IS_PURE = require('../internals/is-pure');

<<<<<<< Updated upstream
var nativeEndsWith = ''.endsWith;
=======
// eslint-disable-next-line es/no-string-prototype-endswith -- safe
var $endsWith = ''.endsWith;
>>>>>>> Stashed changes
var min = Math.min;

var CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('endsWith');
// https://github.com/zloirock/core-js/pull/702
var MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {
  var descriptor = getOwnPropertyDescriptor(String.prototype, 'endsWith');
  return descriptor && !descriptor.writable;
}();

// `String.prototype.endsWith` method
// https://tc39.es/ecma262/#sec-string.prototype.endswith
$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {
  endsWith: function endsWith(searchString /* , endPosition = @length */) {
<<<<<<< Updated upstream
    var that = String(requireObjectCoercible(this));
=======
    var that = toString(requireObjectCoercible(this));
>>>>>>> Stashed changes
    notARegExp(searchString);
    var endPosition = arguments.length > 1 ? arguments[1] : undefined;
    var len = toLength(that.length);
    var end = endPosition === undefined ? len : min(toLength(endPosition), len);
<<<<<<< Updated upstream
    var search = String(searchString);
    return nativeEndsWith
      ? nativeEndsWith.call(that, search, end)
=======
    var search = toString(searchString);
    return $endsWith
      ? $endsWith.call(that, search, end)
>>>>>>> Stashed changes
      : that.slice(end - search.length, end) === search;
  }
});
