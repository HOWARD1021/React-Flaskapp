var $ = require('../internals/export');
var DESCRIPTORS = require('../internals/descriptors');
var anObject = require('../internals/an-object');
<<<<<<< Updated upstream
var toPrimitive = require('../internals/to-primitive');
=======
var toPropertyKey = require('../internals/to-property-key');
>>>>>>> Stashed changes
var definePropertyModule = require('../internals/object-define-property');
var fails = require('../internals/fails');

// MS Edge has broken Reflect.defineProperty - throwing instead of returning false
var ERROR_INSTEAD_OF_FALSE = fails(function () {
<<<<<<< Updated upstream
  /* global Reflect -- required for testing */
=======
  // eslint-disable-next-line es/no-reflect -- required for testing
>>>>>>> Stashed changes
  Reflect.defineProperty(definePropertyModule.f({}, 1, { value: 1 }), 1, { value: 2 });
});

// `Reflect.defineProperty` method
// https://tc39.es/ecma262/#sec-reflect.defineproperty
$({ target: 'Reflect', stat: true, forced: ERROR_INSTEAD_OF_FALSE, sham: !DESCRIPTORS }, {
  defineProperty: function defineProperty(target, propertyKey, attributes) {
    anObject(target);
<<<<<<< Updated upstream
    var key = toPrimitive(propertyKey, true);
=======
    var key = toPropertyKey(propertyKey);
>>>>>>> Stashed changes
    anObject(attributes);
    try {
      definePropertyModule.f(target, key, attributes);
      return true;
    } catch (error) {
      return false;
    }
  }
});
